"use strict";define(function(){"use strict";function a(a){var b=a+"",c=b.indexOf("."),d=5-(b.length-c),e="     ".substring(0,5-c)+b+"0000".substring(0,d);return e}function b(b,d,e){var f="";return f+=a(d),f+=a(e),f+="    0.0000 ",f+=c(b),f}function c(a){var b="",c=a.replace(/^([0-9]*)([^-+]+)(.*)/,"$1"),d=a.replace(/^([0-9]*)([^-+]+)(.*)/,"$2"),e=a.replace(/^([0-9]*)([^-+]+)(.*)/,"$3");if(b+=d+"   ".substring(d.length,3),c){var g=1*c-f[d]+"";b+="  ".substring(g.length,2)+g}else b+=" 0";return e?(e=e.match(/^\+*$/)?e.length:e.match(/^\-*$/)?-e.length:parseInt(e),1===e?b+="  3":2===e?b+="  2":3===e?b+="  1":-1===e?b+="  5":-2===e?b+="  6":-3===e?b+="  7":void 0):b+="  0",b+="  0  0  0  0  0  0  0  0  0  0",b}function d(a,b,c){var d="";return a+="",b+="",c=parseInt(c),d="   ".substring(a.length,3)+a+"   ".substring(b.length,3)+b,(d+=-1===c?"  1  1":-2===c?"  1  6":"  "+c+"  0",d)}function e(a,b,c){var d="";return 0!=b&&(d+=f[a]+b),d+=a,(1===c?d+="+3":2===c?d+="++":3===c?d+="+":5===c?d+="-":6===c?d+="--":7===c?d+="-3":void 0,d)}var f={Cs:133,Cu:64,Kr:84,Cl:35,Co:59,Cr:52,Li:7,Cd:112,Ce:140,La:139,Lu:175,Tm:169,Ti:48,Te:128,Dy:162,Ta:181,Mg:24,Tc:98,Tb:159,F:19,Fe:56,B:11,C:12,N:14,O:16,H:1,Eu:152,Mo:96,I:127,Mn:55,K:39,Er:167,W:184,V:51,Ni:59,P:31,S:32,Nd:144,Ne:20,Nb:93,Y:89,Na:23,Ge:73,Gd:157,Ga:70,Yb:173,Pt:195,Pr:141,Hf:178,He:4,Pd:106,Ho:165,Pm:145,Xe:131,Os:190,Se:79,Au:197,Sc:45,In:115,Ar:40,Si:28,As:75,Sn:119,Sm:150,Ba:137,Sr:88,Ir:192,Ru:101,Ag:108,Sb:122,Al:27,Rb:85,Re:186,Rh:103,Br:80,Ca:40,Be:9,Zn:65,Zr:91};return{toJme:function(a,b){var c=(a+"").split(/\n/),d=[],f=parseInt(c[3].substr(0,3)),g=parseInt(c[3].substr(3,3));d.push(f),d.push(g);for(var h=4;h<f+4;h++){var j,k=c[h],l=parseFloat(k.substr(0,10)).toFixed(2),m=parseFloat(k.substr(10,10)).toFixed(2),n=k.substr(31,3).trim(),o=parseInt(k.substr(34,2).trim()),p=parseInt(k.substr(36,3).trim()),q=parseInt(k.substr(48,3).trim());j=Array.isArray(b)&&b[h-4]?b[h-4]:e(n,o,p),d.push(j,l,m)}for(var h=f+4;h<f+g+4;h++){var k=c[h],r=parseInt(k.substr(0,3)),s=parseInt(k.substr(3,3)),t=parseInt(k.substr(6,3)),u=parseInt(k.substr(9,3));1==u&&(t=-1),6==u&&(t=-2),d.push(r,s,t)}return d.join(" ")},toMolfile:function(a){for(var c=["line 1","","line 3"],e=a.split("|"),f=0,g=0,h=[],j=0;j<e.length;j++){var k=e[j],l=k.split(/[ \r\n\t]+/);if(2>l.length)return;f+=parseInt(l[0]),g+=parseInt(l[1]),h.push(l)}f+="",g+="",c.push("   ".substring(0,3-f.length)+f+"   ".substring(0,3-g.length)+g+"  0  0  0  0  0  0  0  0999 V2000");for(var m=0,n=[],o=[],j=0;j<e.length;j++){for(var l=h[j],f=parseInt(l[0]),g=parseInt(l[1]),p=2;0<f;){f--;var q=l[p++],r=l[p++],s=l[p++];n.push(b(q,r,s))}for(;0<g;){g--;var t=1*l[p++],u=1*l[p++],v=l[p++];o.push(d(t+m,u+m,v))}m+=parseInt(l[0])}return c=c.concat(n),c=c.concat(o),c.push("M  END"),c.join("\n")}}});
